<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Availability of Rooms</title>
<link rel="stylesheet" type="text/css" href="css/styles.css" />
<script type="text/javascript" src="js/datetimepicker_css.js"></script>
<script src="js/jquery.js"></script>
<script src="js/keynav.js"></script>
<script src="js/sliding_effect.js"></script>
<script src="js/interface.js"></script>
<script type="text/javascript">
function call(text)
{
	var name=new Array("gingerhotel","facebook","twitter","linkedin","youtube","gingerfeedback","indiapress",
			"onlinenewspapers","newspapers","allnewspapers");
	var link=new Array("http://www.gingerhotels.com/",
			"http://www.facebook.com",
			"http://www.twitter.com",
			"http://www.linkedin.com",
			"http://www.youtube.com",
			"http://www.gingerhotels.com/contactus/Customer_Feedback.aspx",
			"http://www.indiapress.org/index.php/",
			"http://www.onlinenewspapers.com/",
			"http://newspapers.com/",
			"http://allnewspapers.com/");
	for(var i=0;i<name.length;i++)
	{
		if(text==name[i])
		{
			//window.location=link[i];
			  //alert("link"+link[i]);
			  window.open(link[i],'_blank');
		}
	}
}
function callhref(text)
{
	//alert(text);
	if(text=="index1")
	{
		window.location.href=text+".jsp";
	}
	else	
		window.location.href=text+".html";
		//window.open(text+".html",'_blank');
	//window.location.href=location of file on server
}
</script>
<script type="text/javascript">
	
	$(document).ready(
		function()
		{
			
			$('#dock2').Fisheye(
				{
					maxWidth: 60,
					items: 'a',
					itemsText: 'span',
					container: '.dock-container2',
					itemWidth: 80,
					proximity: 80,
					alignment : 'left',
					valign: 'bottom',
					halign : 'center'
				}
			)
		}
	);

</script>
<script type="text/javascript">

	

	var state = 0;
	function gup( url, name )
	{
	name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");  
	var regexS = "[\\?&]"+name+"=([^&#]*)"; 
	var regex = new RegExp( regexS );  
	var results = regex.exec(url);//regex.exec( window.location.href );  
	if( results == null )   
	return "";  
	else   
	return results[1];
	}	
	

	function reservation(spaId) {

	var datetime = "datetime"+spaId;

	if(document.getElementById(datetime).value=='')
    {
       document.getElementById("messageId").innerHTML="<center>Please select the Date & Time for Spa .</center>";
       document.getElementById(datetime).focus();
       return false;
    }
	var timslot = "timeSlot"+spaId;
	var selTimeSlot = document.getElementById(timslot).value;
	var selDataTime = document.getElementById(datetime).value;
	getdetails(spaId,selTimeSlot,selDataTime);
	}

	function getdetails(spaId,selTimeSlot,selDataTime) {
		/*if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
			xmlhttp = new XMLHttpRequest();
			//alert('inside xmlhttprequest')
		} else {// code for IE6, IE5
			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			//alert('inside activexobj');
		}
		var url = 	'http://172.17.199.87:8080/RestWebService/rest/makeSpaReservation?roomId=109&guestName=James&spaId='+spaId+'&timeSlot='+selTimeSlot+'&spaDate='+selDataTime+'';
		alert(url);
		xmlhttp.open("GET", "http://172.17.199.87:8080/RestWebService/rest/makeSpaReservation?roomId=109&guestName=James&spaId="+spaId+"&timeSlot="+selTimeSlot+"&spaDate="+selDataTime+"", true);
		xmlhttp.send(null);

		xmlhttp.onreadystatechange = function() {

			if (xmlhttp.readyState == 4) {
				if (xmlhttp.status == 200) {

					var det = xmlhttp.responseText;
					//alert("response Text:-"+det); Success Message
					document.getElementById("messageId").innerHTML=det;

				} else
					document.getElementById("messageId").innerHTML="Error ->" + xmlhttp.responseText;
				//document.getElementById("messageId").innerHTML="Status ->" + xmlhttp.status;
			}
			// alert("after");
		};
		*/
		document.getElementById("messageId").innerHTML='Slot Booking Successful';
	}
</script>
<SCRIPT type="text/javascript">
	var state = 0;
	function gup(url, name) {
		name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
		var regexS = "[\\?&]" + name + "=([^&#]*)";
		var regex = new RegExp(regexS);
		var results = regex.exec(url);//regex.exec( window.location.href );  
		if (results == null)
			return "";
		else
			return results[1];
	}

	/*function onSuccess() {

		var urlDisplay = 'http://172.17.199.87:8080/RestWebService/rest/getSpaIdDetails?callback=onDisplay';
		//alert("urlDisplay:-"+urlDisplay);
		state = gup(window.location.href, 'param');
		$.getScript(urlDisplay);
	}

	function onDisplay(data) {
	*/
	function onDisplay() {
		var html = "<table class='sample' border='1'  cellpadding='1' cellspacing='1' width='600'  height='250px' align='center'><tr><th>SpaDetails</th><th>Price</th><th>Duration</th><th>Select the Date</th><th width='100px' align='center'>Available Slots</th><th>Action</th></tr>";

		var i;
		
			for (i = 1; i < 7; i++) {
				var spaId = i;
				var name="Hot Stone Massage";
				var amount="850 INR";
				var duration="1 hr";
				if(i==2)
				{
					name="Flotation";
					amount="800 INR";
					duration="1 hr";
				}
				if(i==3)
				{
					name="Body Mask";
					amount="900 INR";
					duration="2 hr";
				}
				if(i==4)
				{
					name="Salt Glow";
					amount="750 INR";
					duration="2 hr";
				}
				if(i==5)
				{
					name="Swiss Shower";
					amount="980 INR";
					duration="1 hr";
				}
				if(i==6)
				{
					name="Fango Mud Treatment"
					amount="800 INR";
					duration="2 hr";
				}
				var timslot = "timeSlot"+spaId;
				var datetime = "datetime"+spaId;
				var datehref="javascript:NewCssCal('"+datetime+"','ddmmyyyy','dropdown',false)";
				var reservation="reservation('"+spaId+"');"

				html += "<tr><td class='txt'>"+name+"</td><td class='txt'>"+amount+"</td><td class='txt'>"+duration+"</td><td class='txt'><input type='text' name='"+datetime+"' id='"+datetime+"' size='12' maxlength='20' readonly='readonly'> <a href="+datehref+"><img src='images/spa/cal.gif' style='border-style: none' width='16' height='16' alt='Pick a date'> </a></td><td><select id="+timslot+" name="+timslot+"><option value='1'>Slot1(7-8AM)</option><option value='2'>Slot2(9-10AM)</option><option value='3'>Slot3(11-12Noon)</option><option value='4'>Slot4(1-2PM)</option><option value='5'>Slot5(3-4PM)</option><option value='6'>Slot6(5-6PM)</option><option value='7'>Slot7(7-8PM)</option><option value='8'>Slot8(9-10PM)</option></select></td><td><a href='#' onclick="+reservation+"> <IMG SRC='images/spa/reserve.JPG' WIDTH='80' HEIGHT='25' BORDER='0' ALT='Reserve'></a></td></tr>";
			}
			html += "</table>";
			//alert(html);
	

		document.getElementById("displaySpa").innerHTML = html;
	}
</SCRIPT>
</head>
<style type="text/css">


.sample {
	border-width: 1px;
	border-spacing: 0;
	border-collapse: collapse;
	border-style: outset;
	border-color: gray;
	
}

.heading {
	color: black;
	margin: 10px;
	vertical-align: center;
	text-align: center;
	font-family: verdana;
	font-size: 18px;
	font-weight: bold;
	color: black;
	top: 10px;
}

.sample th {
	color: black;
	margin: 10px;
	vertical-align: center;
	background-color :  #FDEEF4;
	text-align: center;
	font-family: verdana;
	font-size: 12px;
	font-weight: medium;
	color: black;
	top: 10px;
}

.txt {
	color: black;
	margin: 10px;
	text-align: center;
	font-family: verdana;
	font-size: 12px;
	color: black;
	top: 10px;
}
</style>
<body onload="javascript:onDisplay();">
<form name="spaReservation">

<div style="margin: 50px 0px 20px 225px; border: 1px solid #666; width : 600px; height: 400px;  background-image :   url('images/spa/spa4blur.jpg'); ">
<table align="center">
<tr>
<td>&nbsp;</td>
</tr>
	<tr>
        
		<td colspan="7" class="heading">Spa Reservation</td>
	</tr>
	<tr><td>&nbsp;</td></tr>
</table>
<div id="displaySpa"></div>
</br>
<div id="messageId" align="center" style=" font-family: verdana; font-size :14px; color:#8B0000; font-weight: bold;"></div>
</div>


</form>
<div class="dock2" id="dock2">
  <div class="dock-container2">
  <a class="dock-item2" href="javascript:callhref('index1')"><span>Home</span><img src="images/dock/home.png" alt="Home" /></a> 
<!--  <a class="dock-item2" href="javascript:call('gingerhotel')"><span>Ginger Hotels</span><img src="images/dock/ginger.png" alt="Ginger Hotels" /></a> --><!--
  <a class="dock-item2" href="javascript:callhref('socialnetworks')"><span>Social Networking</span><img src="images/dock/social.png" alt="Social Networking" /></a> 
  <a class="dock-item2" href="javascript:callhref('news')"><span>Web Channels</span><img src="images/dock/webchannel.png" alt="Web Channels" /></a>
  <a class="dock-item2" href="javascript:call('youtube')"><span>Youtube</span><img src="images/dock/youtube1.png" alt="InfoEntertainment" /></a>
 <a class="dock-item2" href="javascript:callhref('newspaper')"><span>Newspaper</span><img src="images/dock/newspaper.png" alt="Info Entertainment" /></a> -->
<a class="dock-item2" href="javascript:callhref('feedback')"><span>Feedback</span><img src="images/dock/feedback.png" alt="Feedback" /></a>
  <a class="dock-item2" href="javascript:callhref('invoice')"><span>Invoice</span><img src="images/dock/invoice.png" alt="Invoice" /></a>
  <a class="dock-item2" href="javascript:callhref('restaurant')"><span>Restaurant Booking</span><img src="images/dock/restaurant.png" alt="Restaurant Booking" /></a>
  <a class="dock-item2" href="javascript:callhref('dispMessage')"><span>Inbox</span><img src="images/dock/message.png" alt="Messages" /></a>
  <a class="dock-item2" href="javascript:callhref('pickDropService')"><span>Pick and Drop</span><img src="images/dock/pick.png" alt="Pick and Drop" /></a>
  <a class="dock-item2" href="javascript:callhref('emailLogin')"><span>Find Friends</span><img src="images/dock/friends.png" alt="Find Friends" /></a> 
  </div>
</div>

</body>
</html>